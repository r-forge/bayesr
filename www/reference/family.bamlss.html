<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Distribution Families in bamlss — family.bamlss • bamlss</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Distribution Families in bamlss — family.bamlss"><meta property="og:description" content="Family objects in bamlss specify the information that is needed for using (different)
  model fitting engines, e.g., the parameter names and corresponding link functions, the
  density function, derivatives of the log-likelihood w.r.t. the predictors, and so
  forth. The optimizer or sampler functions that are called by bamlss must know how
  much information is needed to interpret the model since the family objects are simply
  passed through. Family objects are also used for computing post-modeling statistics, e.g., for
  residual diagnostics or random number generation. See the details and examples."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">bamlss</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.2-2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/bamlss.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/terms.html">Available Model Terms</a>
    </li>
    <li>
      <a href="../articles/families.html">Families</a>
    </li>
    <li>
      <a href="../articles/bf.html">BAMLSS Model Frame</a>
    </li>
    <li>
      <a href="../articles/engines.html">Estimation Engines</a>
    </li>
    <li>
      <a href="../articles/distregvis.html">Visualization with distreg.vis</a>
    </li>
    <li>
      <a href="../articles/glm.html">Generalized Linear Models (+)</a>
    </li>
    <li>
      <a href="../articles/multinomial.html">Bayesian Multinomial Regression</a>
    </li>
    <li>
      <a href="../articles/rent.html">Munich Rent Example</a>
    </li>
    <li>
      <a href="../articles/zn.html">Spatial Location-Scale Model</a>
    </li>
    <li>
      <a href="../articles/fatalities.html">Fatalities Model for Austria</a>
    </li>
    <li>
      <a href="../articles/mvnorm.html">Multivariate Normal Model</a>
    </li>
    <li>
      <a href="../articles/misc.html">Miscellaneous Topics</a>
    </li>
  </ul></li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Publications
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/jm.html">Bayesian Joint Models for Longitudinal and Survival Data</a>
    </li>
    <li>
      <a href="../articles/bivnorm.html">Bivariate Gaussian Models for Wind Vectors</a>
    </li>
    <li>
      <a href="../articles/cox.html">Complex Space-Time Interactions in a Cox Model</a>
    </li>
    <li>
      <a href="../articles/lasso.html">LASSO-Type Penalization in the Framework of GAMLSS</a>
    </li>
  </ul></li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Distribution Families in <span class="pkg">bamlss</span></h1>
    
    <div class="hidden name"><code>family.bamlss.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Family objects in <span class="pkg">bamlss</span> specify the information that is needed for using (different)
  model fitting engines, e.g., the parameter names and corresponding link functions, the
  density function, derivatives of the log-likelihood w.r.t. the predictors, and so
  forth. The optimizer or sampler functions that are called by <code><a href="bamlss.html">bamlss</a></code> must know how
  much information is needed to interpret the model since the family objects are simply
  passed through. Family objects are also used for computing post-modeling statistics, e.g., for
  residual diagnostics or random number generation. See the details and examples.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co">## Family objects in bamlss:</span></span>
<span><span class="fu">ALD_bamlss</span><span class="op">(</span><span class="va">...</span>, tau <span class="op">=</span> <span class="fl">0.5</span>, eps <span class="op">=</span> <span class="fl">0.01</span><span class="op">)</span></span>
<span><span class="fu">beta_bamlss</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span><span class="fu">binomial_bamlss</span><span class="op">(</span>link <span class="op">=</span> <span class="st">"logit"</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="fu">cnorm_bamlss</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span><span class="fu">cox_bamlss</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span><span class="fu">dw_bamlss</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span><span class="fu">DGP_bamlss</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span><span class="fu">dirichlet_bamlss</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span><span class="fu">ELF_bamlss</span><span class="op">(</span><span class="va">...</span>, tau <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span><span class="fu">gaussian_bamlss</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span><span class="fu">gaussian2_bamlss</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span><span class="fu">Gaussian_bamlss</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span><span class="fu">gamma_bamlss</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span><span class="fu">logNN_bamlss</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span><span class="fu">multinomial_bamlss</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span><span class="fu">mvnorm_bamlss</span><span class="op">(</span>k <span class="op">=</span> <span class="fl">2</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="fu">mvnormAR1_bamlss</span><span class="op">(</span>k <span class="op">=</span> <span class="fl">2</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="fu">poisson_bamlss</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span><span class="fu">gpareto_bamlss</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span><span class="fu">glogis_bamlss</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span><span class="fu">AR1_bamlss</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span><span class="fu">beta1_bamlss</span><span class="op">(</span><span class="va">ar.start</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="fu">nbinom_bamlss</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span><span class="fu">ztnbinom_bamlss</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span><span class="fu">lognormal_bamlss</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span><span class="fu">weibull_bamlss</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span><span class="fu">Sichel_bamlss</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span><span class="fu">GEV_bamlss</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span><span class="fu">gumbel_bamlss</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span><span class="fu">mix_bamlss</span><span class="op">(</span><span class="va">f1</span>, <span class="va">f2</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="fu">ZANBI_bamlss</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Extractor functions:</span></span>
<span><span class="co"># S3 method for bamlss</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">family</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="co"># S3 method for bamlss.frame</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">family</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>object</dt>
<dd><p>An object of class <code>"bamlss"</code> or <code>"bamlss.frame"</code>, see function
    <code><a href="bamlss.html">bamlss</a></code> and <code><a href="bamlss.frame.html">bamlss.frame</a></code>.</p></dd>

  <dt>k</dt>
<dd><p>The dimension of the multivariate normal. Note, if <code>k = 1</code> function
    <code>gaussian_bamlss()</code> is called.</p></dd>

  <dt>ar.start</dt>
<dd><p>Logical vector of length equal to the number of rows of the full data set
    used for modeling. Must hold entries <code>TRUE</code> indicating the start of a time series of
    a section. If <code>ar.start = NULL</code> lagged residuals are computed by simple shifting.
    See also <code><a href="https://rdrr.io/pkg/mgcv/man/bam.html" class="external-link">bam</a></code>.</p></dd>

  <dt>link</dt>
<dd><p>Possible link functions.</p></dd>

  <dt>tau</dt>
<dd><p>The quantile the should be fitted.</p></dd>

  <dt>eps</dt>
<dd><p>Constant to be used for the approximation of the absolute function.</p></dd>

  <dt>f1, f2</dt>
<dd><p>A family of class <code>"gamlss.family"</code>, see package <span class="pkg">gamlss.dist</span>.</p></dd>

  <dt>...</dt>
<dd><p>Arguments passed to functions that are called within the family object.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>The following lists the minimum requirements on a <span class="pkg">bamlss</span> family object to be used with
  <code><a href="bamlss.html">bamlss</a></code> and <code><a href="bamlss.frame.html">bamlss.frame</a></code>:</p><ul><li><p>The family object must return a <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></code> of class <code>"family.bamlss"</code>.</p></li>
<li><p>The object must contain the family name as a character string.</p></li>
<li><p>The object must contain the names of the parameters as a character string, as well as
      the corresponding link functions as character string.</p></li>
</ul><p>For most optimizer and sampling functions at least the density function, including a <code>log</code>
  argument, should be provided.
  When using generic model fitting engines like <code><a href="bfit.html">opt_bfit</a></code> or <code><a href="GMCMC.html">sam_GMCMC</a></code>, as
  well as for computing post-modeling statistics with function <code><a href="samplestats.html">samplestats</a></code>, and others,
  it is assumed that the density function in a family object has the following arguments:</p>
<p><code>d(y, par, log = FALSE, ...)</code></p>
<p>where argument <code>y</code> is the response (possibly a matrix) and <code>par</code> is a named list
  holding the evaluated parameters of the distribution, e.g., using a normal distribution <code>par</code>
  has two elements, one for the mean <code>par$mu</code> and one for the standard deviation
  <code>par$sigma</code>. The dots argument is for passing special internally used objects, depending
  on the type of model this feature is usually not needed.</p>
<p>Similarly, for derivative based algorithms, e.g. using iteratively weighted least squares
  (IWLS, see function <code><a href="bfit.html">opt_bfit</a></code>, the family object holds derivative functions evaluating
  derivatives of the log-likelihood w.r.t. the predictors (or expectations of derivatives).
  For each parameter, these functions also hold the following arguments:</p> 
<p><code>score(y, par, ...)</code></p>
<p>for computing the first derivative of the log-likelihood w.r.t. a predictor and</p>
<p><code>hess(y, par, ...)</code></p>
<p>for computing the negative second derivatives. Within the family object these functions
  are organized in a named list, see the examples below.</p>
<p>In addition, for the cumulative distribution function (<code>p(y, par, ...)</code>), for the quantile
  function (<code>q(y, par, ...)</code>) or for creating random numbers (<code>r(n, par, ...)</code>) the same
  structure is assumed. See, e.g., the code of function <code>gaussian.bamlss()</code>.</p>
<p>Some model fitting engines can initialize the distributional parameters which oftentimes
  leads to much faster convergence. The initialize functions are again organized within a named list,
  one entry for each parameter, similar to the <code>score</code> and <code>hess</code> functions, e.g.,
  see the code of family object <code>gaussian.bamlss</code>.</p>
<p>Using function <code><a href="bamlss.html">bamlss</a></code>, <code><a href="residuals.bamlss.html">residuals.bamlss</a></code> and
  <code><a href="predict.bamlss.html">predict.bamlss</a></code> the family objects may
  also specify the <code><a href="https://rdrr.io/r/base/transform.html" class="external-link">transform()</a></code>er, <code>optimizer()</code>, <code>sampler()</code>,
  <code><a href="samplestats.html">samplestats()</a></code>, <code>results()</code>, <code><a href="https://rdrr.io/r/stats/residuals.html" class="external-link">residuals()</a></code> and <code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code> function that
  should be used with this family. See for example the setup of <code>cox_bamlss</code>.</p>
<p>For using specialized estimation engines like <code><a href="JAGS.html">sam_JAGS</a></code> it is recommended to supply
  any extra arguments needed by those engines with an additional list entry within the family
  object, e.g., using <code>gaussian_bamlss()</code> with <code><a href="JAGS.html">sam_JAGS</a></code> the family objects holds
  special details in an element named <code>"bugs"</code>.</p>
<p>The examples below illustrate this setup. See also the code of the <span class="pkg">bamlss</span> family
  functions.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="bamlss.html">bamlss</a></code>, <code><a href="bamlss.frame.html">bamlss.frame</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## New family object for the normal distribution,</span></span></span>
<span class="r-in"><span><span class="co">## can be used by function opt_bfit() and sam_GMCMC().</span></span></span>
<span class="r-in"><span><span class="va">normal_bamlss</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"family"</span> <span class="op">=</span> <span class="st">"normal"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"names"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mu"</span>, <span class="st">"sigma"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="st">"links"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"identity"</span>, <span class="st">"log"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="st">"d"</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">y</span>, <span class="va">par</span>, <span class="va">log</span> <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">dnorm</a></span><span class="op">(</span><span class="va">y</span>, mean <span class="op">=</span> <span class="va">par</span><span class="op">$</span><span class="va">mu</span>, sd <span class="op">=</span> <span class="va">par</span><span class="op">$</span><span class="va">sigma</span>, log <span class="op">=</span> <span class="va">log</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">}</span>,</span></span>
<span class="r-in"><span>    <span class="st">"score"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="st">"mu"</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">y</span>, <span class="va">par</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>        <span class="fu"><a href="https://rdrr.io/r/base/drop.html" class="external-link">drop</a></span><span class="op">(</span><span class="op">(</span><span class="va">y</span> <span class="op">-</span> <span class="va">par</span><span class="op">$</span><span class="va">mu</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="va">par</span><span class="op">$</span><span class="va">sigma</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="op">}</span>,</span></span>
<span class="r-in"><span>      <span class="st">"sigma"</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">y</span>, <span class="va">par</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>        <span class="fu"><a href="https://rdrr.io/r/base/drop.html" class="external-link">drop</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span> <span class="op">+</span> <span class="op">(</span><span class="va">y</span> <span class="op">-</span> <span class="va">par</span><span class="op">$</span><span class="va">mu</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span> <span class="op">/</span> <span class="op">(</span><span class="va">par</span><span class="op">$</span><span class="va">sigma</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="op">}</span></span></span>
<span class="r-in"><span>    <span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="st">"hess"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="st">"mu"</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">y</span>, <span class="va">par</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>        <span class="fu"><a href="https://rdrr.io/r/base/drop.html" class="external-link">drop</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">/</span> <span class="op">(</span><span class="va">par</span><span class="op">$</span><span class="va">sigma</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="op">}</span>,</span></span>
<span class="r-in"><span>      <span class="st">"sigma"</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">y</span>, <span class="va">par</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span> </span></span>
<span class="r-in"><span>        <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="op">}</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"family.bamlss"</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="co">## Test on simulated data.</span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="GAMart.html">GAMart</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="bamlss.html">bamlss</a></span><span class="op">(</span><span class="va">num</span> <span class="op">~</span> <span class="fu">s</span><span class="op">(</span><span class="va">x1</span><span class="op">)</span> <span class="op">+</span> <span class="fu">s</span><span class="op">(</span><span class="va">x2</span><span class="op">)</span> <span class="op">+</span> <span class="fu">s</span><span class="op">(</span><span class="va">x3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">d</span>, family <span class="op">=</span> <span class="st">"normal"</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in eval(parse(text = family[1])):</span> object 'normal_bamlss' not found</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in h(simpleError(msg, call)):</span> error in evaluating the argument 'x' in selecting a method for function 'plot': object 'b' not found</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Compute the log-likelihood using the family object.</span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html" class="external-link">family</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in family(b):</span> object 'b' not found</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">f</span><span class="op">$</span><span class="fu">d</span><span class="op">(</span>y <span class="op">=</span> <span class="va">d</span><span class="op">$</span><span class="va">num</span>, par <span class="op">=</span> <span class="va">f</span><span class="op">$</span><span class="fu">map2par</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/fitted.values.html" class="external-link">fitted</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span><span class="op">)</span>, log <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in eval(expr, envir, enclos):</span> object 'f' not found</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## For using JAGS() more details are needed.</span></span></span>
<span class="r-in"><span><span class="va">norm4JAGS_bamlss</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">f</span> <span class="op">&lt;-</span> <span class="fu">normal_bamlss</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">f</span><span class="op">$</span><span class="va">bugs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"dist"</span> <span class="op">=</span> <span class="st">"dnorm"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"eta"</span> <span class="op">=</span> <span class="va">BUGSeta</span>,</span></span>
<span class="r-in"><span>    <span class="st">"model"</span> <span class="op">=</span> <span class="va">BUGSmodel</span>,</span></span>
<span class="r-in"><span>    <span class="st">"reparam"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>sigma <span class="op">=</span> <span class="st">"1 / sqrt(sigma)"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Now with opt_bfit() and sam_JAGS().</span></span></span>
<span class="r-in"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="bamlss.html">bamlss</a></span><span class="op">(</span><span class="va">num</span> <span class="op">~</span> <span class="fu">s</span><span class="op">(</span><span class="va">x1</span><span class="op">)</span> <span class="op">+</span> <span class="fu">s</span><span class="op">(</span><span class="va">x2</span><span class="op">)</span> <span class="op">+</span> <span class="fu">s</span><span class="op">(</span><span class="va">x3</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">d</span>,</span></span>
<span class="r-in"><span>  optimizer <span class="op">=</span> <span class="va">opt_bfit</span>, sampler <span class="op">=</span> <span class="va">sam_JAGS</span>, family <span class="op">=</span> <span class="st">"norm4JAGS"</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in eval(parse(text = family[1])):</span> object 'norm4JAGS_bamlss' not found</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in h(simpleError(msg, call)):</span> error in evaluating the argument 'x' in selecting a method for function 'plot': object 'b' not found</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Nikolaus Umlauf, Nadja Klein, Achim Zeileis, Thorsten Simon.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

